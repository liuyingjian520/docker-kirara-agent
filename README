# Docker Kirara Agent

[![Docker](https://img.shields.io/docker/pulls/liuyingjian520/kirara-agent.svg)](https://hub.docker.com/r/liuyingjian520/kirara-agent)
[![License](https://img.shields.io/github/license/user/docker-kirara-agent.svg)](LICENSE)

## 项目介绍

Docker Kirara Agent 是一个容器化的代理服务，提供了简单易用的部署方式和丰富的功能。本项目支持自动检测系统环境、智能识别Linux发行版、自动安装Docker和Docker Compose，实现无人值守部署。

### 主要特性

- 🔒 **安全端口配置**：默认使用HTTPS和安全端口
- 🔄 **自动更新**：集成Watchtower实现容器自动更新
- 📊 **监控系统**：集成Prometheus和Grafana监控
- 🔍 **自动检测系统环境**：智能识别Linux发行版
- 🛠️ **自动安装依赖**：自动安装Docker和Docker Compose
- 👶 **小白友好**：一键部署，无需复杂配置

## 快速开始

### 方法一：一键部署（推荐）

#### Linux系统

```bash
# 使用curl
curl -fsSL https://raw.githubusercontent.com/user/docker-kirara-agent/main/deploy.sh | sudo bash

# 或使用wget
wget -O - https://raw.githubusercontent.com/user/docker-kirara-agent/main/deploy.sh | sudo bash
```

#### Windows系统

1. 下载 [deploy.bat](https://raw.githubusercontent.com/user/docker-kirara-agent/main/deploy.bat) 文件
2. 右键点击，选择「以管理员身份运行」

### 方法二：手动安装

#### 前提条件

- Docker 已安装
- Docker Compose 已安装

#### 安装步骤

1. 克隆仓库

```bash
git clone https://github.com/user/docker-kirara-agent.git
cd docker-kirara-agent
```

2. 启动服务

```bash
# Linux
bash start.sh

# Windows
start.bat
```

## 配置说明

配置文件位于 `config/default.json`，主要配置项包括：

- `server`: 服务器配置，包括端口和日志级别
- `security`: 安全配置，包括SSL和认证
- `proxy`: 代理配置
- `monitoring`: 监控配置

## 访问服务

安装完成后，可以通过以下地址访问服务：

- Kirara Agent: `https://your-server-ip:8443`
- Grafana: `http://your-server-ip:3000` (默认用户名/密码: admin/secure_password)
- Prometheus: `http://your-server-ip:9090`

## 常见问题

### 如何修改默认端口？

编辑 `config/default.json` 文件，修改 `server.port` 值，然后重启服务。

### 如何启用SSL？

SSL默认已启用。如需使用自己的证书，请将证书文件放置在 `ssl` 目录下，并更新配置文件中的路径。

### 如何卸载？

```bash
# Linux
sudo /opt/kirara-agent/uninstall.sh

# Windows
%ProgramFiles%\Kirara-Agent\uninstall.bat
```

## 许可证

本项目采用 MIT 许可证，详情请参阅 [LICENSE](LICENSE) 文件。